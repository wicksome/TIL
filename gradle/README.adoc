= https://gradle.org/[Gradle]
:toc:

빌드 자동화 도구. (오픈 소스)

== Install

[source, bash]
----
brew install gradle
----

== `PluginDependencySpec.apply`?

* 현재 프로젝트에 플러그인의 적용 여부를 지정, 설정하지 않으면 프로젝트의 classpath에만 설정.
* default: `true`
* 플러그인의 클래스를 재사용하거나 하위 프로젝트에 적용할 때 유용함
+
[source, gradle]
----
plugins {
   id "org.company.myplugin" version "1.0" apply false
}

subprojects {
   if (someCondition) {
       apply plugin: "org.company.myplugin"
   }
}
----


== scope

`core` <- `web-core` <- `web`

[NOTE]
.api
====
* web에서 `api("web-core")` 하면 `core` 코드까지 사용 가능
* `core` 수정 시 `web-core`, `web` 빌드
====


[NOTE]
.implementation
====
* web에서 `implementation: web-core` 하면  바로 `web-core` 코드만 사용 가능
* core 수정시 web-core까지만 재빌드
====

=== :web-code 모듈에 :core 모듈이 api 일 때

[source, kotlin]
.build.gradle.kts in :web-core
----
dependencies {
   api(project(:core))
}
----

==== :web 모듈에 :web-core 모듈이 api 일 때

[source, kotlin]
.build.gradle.kts in :web
----
dependencies {
   api(project(:web-core))
}
----

=== :web-code 모듈에 :core 모듈이 implementation 일 때

[source, kotlin]
.build.gradle.kts in :web-core
----
dependencies {
   implementation(project(:core))
}
----

== NamedDomainObjectContainerExtensions

=== https://gradle.github.io/kotlin-dsl-docs/api/org.gradle.kotlin.dsl/org.gradle.api.-named-domain-object-container/creating.html[creating]

주어진 설정으로 기본 컬렉션을 생성

[source, kt]
----
val myElement by myContainer.creating { myProperty = 42 }
----

== NamedDomainObjectCollectionExtensions

=== https://gradle.github.io/kotlin-dsl-docs/api/org.gradle.kotlin.dsl/getting.html[getting]

[source, kt]
.build.gradle.kts
----
val commonMain by getting
val commonMain by getting { }
----

대리자 속성(delegate property)을 통해 컬렉션의 기존 요소(element)를 참조하는 관용적 방법.

== scan 옵션

* https://scans.gradle.com/#gradle
* `--scan` 옵션을 추가하면 결과를 웹 UI로 볼 수 있음
* 다만, gradle에 결과를 전송해서 보는 방식
