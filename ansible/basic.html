<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.25">
<title>Ansible 기초</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock pre>code{display:block}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
<h1>Ansible 기초</h1>
<div class="details">
<span id="revdate">2019-11-05T14:14:00+09:00</span>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_ansible">Ansible?</a>
<ul class="sectlevel2">
<li><a href="#_앤서블의_구성">앤서블의 구성</a></li>
<li><a href="#_앤서블의_특징">앤서블의 특징</a></li>
<li><a href="#_앤서블_설정_파일">앤서블 설정 파일</a></li>
</ul>
</li>
<li><a href="#_playbook">Playbook</a>
<ul class="sectlevel2">
<li><a href="#_playbook_실행">Playbook 실행</a></li>
</ul>
</li>
<li><a href="#_inventory">Inventory</a>
<ul class="sectlevel2">
<li><a href="#_정적_인벤토리_파일_작성_방법">정적 인벤토리 파일 작성 방법</a></li>
</ul>
</li>
<li><a href="#_variable">Variable</a>
<ul class="sectlevel2">
<li><a href="#_변수_이름을_작성하는_규칙">변수 이름을 작성하는 규칙</a></li>
<li><a href="#_변수를_정의하는_방법">변수를 정의하는 방법</a></li>
</ul>
</li>
<li><a href="#_jinja2">Jinja2</a></li>
<li><a href="#_role">Role</a></li>
<li><a href="#_reference">Reference</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">IaaS, Infrastructure as a Service</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>클라우드를 통해 가상머신 환경을 온디맨드로 제공</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">IaC, Infrastructure as Code</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>인프라스트럭쳐 상태를트소프트웨어가 자동으로 실행할 수 있는 코드 형태로 기술</p>
</li>
<li>
<p>여기서 말하는 인프라는 "시스템을 가동하기 위해 전제가 되는 주변 환경 모두"를 가르킴</p>
</li>
<li>
<p>엄밀하게는 서버와 네트워크 계층을 다루는 것을  IaC, 미들웨어와 애플리케이션 배포 등의 상위 계층을 다루는 것을 CaC(Configutation as Code)라고도 하지만 넓은 의미로 IaC의 한 요소로 간주</p>
</li>
<li>
<p>작업에서의 노동 시간 감소화 효율화에 의한 비용 감소</p>
</li>
<li>
<p>코드화에 의한 고도의 품질 보증</p>
</li>
<li>
<p>IaC를 실현할 도구:</p>
<div class="ulist">
<ul>
<li>
<p>이전에는 shell script, shell의 조합</p>
</li>
<li>
<p>현재는 구성 관리 도구 사용 - Chef, Puppet, Ansible</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">DevOps</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>"개발(Dev) 계층과 운용(Ops) 계층의 밀접한 연결에 의한 소프트웨어 라이프 사이클의 단기화화라는 축을 중심으로 한 방법과 기술 등의 구체적인 것에서부터 조직론에서 경영 철학에 이르는 추상적인 개념까지 다양한 문맥에서 사용되어 여러가지 의미가 추가됨</p>
</li>
<li>
<p>데브옵스 맥락에서 생각하면, 제일 중요한 것은 CI(Continuous Integration)에 의한 연결이며, IaC로 인프라를 자동화함으로써 개발에서 테스트, 인프라 설치에 이르기까지 시스템 릴리즈에 필요한 전 과정을 자동화하고 똑똑하게 통합할 수 있음</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ansible">Ansible?</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>미국 레드헷사가 제공</p>
</li>
<li>
<p>파이썬으로 개발</p>
</li>
<li>
<p>NASA(미국항공우주국)와 같은 대규모 조직에서도 도입</p>
</li>
<li>
<p>앤서블이 내세운 모토: "모든 사람을 위한 자동화(Automation for Everyone)"</p>
</li>
<li>
<p>앤서블이 지향하는 방향성: "누군가는 사용하기 쉽다"가 아닌 "누구나 사용하기 쉽다", 국소적인 생산성이 아닌 조직 전체의 생산성.</p>
</li>
<li>
<p>"fail-fast" 사상을 따라 자동으로 반환 코드를 확인하고 태스크가 실패하면 그 부분에서 플레이북을 정지</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_앤서블의_구성">앤서블의 구성</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>본체</p>
<div class="paragraph">
<p>앤서블 소프트웨어 그 자체로, 서버/클라이언트 구성과 같은 형태가 아니며 상주 프로세스를 둘 필요가 없다. 한 번 설치하면 필요할 때 명령을 실행하는 것으로 충분하다.</p>
</div>
</li>
<li>
<p>인벤터리(Inventory)</p>
<div class="paragraph">
<p><strong>앤서블이 작업할 대상 머신. "어디에서" 앤서블을 실행하는가?</strong></p>
</div>
<div class="paragraph">
<p>인벤터리는 앤서블에서 조작 대상이 되는 서버 접속 정보를 나타낸다. 인벤터리는 여러 개의 서버를 그룹화해 정의하거나 각각의 서버와 그룹에 대해 변수를 사용한 파라미터를 설정할 수 있다.</p>
</div>
</li>
<li>
<p>모듈(Module)</p>
<div class="paragraph">
<p><strong>앤서블에서 실행되는 개별 작업의 정의. "무엇을" 앤서블에서 실행하는가?</strong></p>
</div>
<div class="paragraph">
<p>앤서블에서 실행된 하나하나의 명령 같은 것. <code>ansible-doc -l</code> 명령어로 공식 모듈을 확인할 수 있다.</p>
</div>
</li>
<li>
<p>플레이북(Playbook)</p>
<div class="paragraph">
<p><strong>모듈 호출의 중심에 있는 앤서블 코드. "어떻게" 앤서블을 실행하는가?</strong></p>
</div>
<div class="paragraph">
<p>앤서블에서 스크립트(=코드)이며 앤서블을 사용할 때 필요한 작업은 플레이북의 구현과 실행이라고 할 수 있다. YAML로 작성한다.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_앤서블의_특징">앤서블의 특징</h3>
<div class="imageblock">
<div class="content">
<img src="https://miro.medium.com/max/1656/1*PPM4yvx7gx1-6yRVss0IPg.png" alt="Ansible deployment architecture">
</div>
</div>
<div class="sect3">
<h4 id="_agentless">Agentless</h4>
<div class="paragraph">
<p>기존에 존재하던 구성 관리 도구인 Chef와 Puppet은 루비로 작성되었고, 작업 대상 머신에 전용 에이전트가 중앙 서버에 접근해 코드를 취득한 다음 에이전트가 스스로 해당 머신에 적합한 상태를 설정한다. 이렇게 중앙서버에서 설정을 가져오는 것을 pull type 아키텍처라고 한다.</p>
</div>
<div class="paragraph">
<p>이에 반해 앤서블에서 채용한 에이전트리스 모델은 push type 아키텍처로, 앤서블이 설치된 중앙 머신이 각 실행 대상에게 로그인해서 직접 명령을 실행한다.<br>
네트워크 접속은 일반 SSH를 이용한다. 즉, 사람이 로그인할 때와 동일하게 실행 대상 서버에 로그인한다.</p>
</div>
</div>
<div class="sect3">
<h4 id="_idempotency">Idempotency</h4>
<div class="paragraph">
<p>멱등성. "어떤 작업을 여러 번 실행해도 결과가 항상 같다다는 성질이다. 앤서블에 대해서는 각 모듈의 내부에서 무엇을 실행할 것인가를 "절차적"으로 다루는 것이 아니라, 최종 본래의 형태를 "선언적"으로 다뤄 멱등성이 보장되도록 하는 것이다. "파일 A를 배치한다"는 처리를 예로 멱등성의 유무에 따라 동작이 어떻게 달라지는지 보자.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">멱등성을 고려하지 않은 경우</dt>
<dd>
<p>"파일 A를 어디에 복사한다"라는 절차 그 자체가 설정돼 있으며 작업 실행 전의 파일 설치 상황은 고려하지 않는다. 이미 파일이 있는 경우에도 다시 복사하거나, 작업 대상의 상태에 따라 필요 없는 처리가 실행되는 것처럼 기대하지 않은 결과가 발생할 우려가 있다.</p>
</dd>
<dt class="hdlist1">멱등성이 보장된 경우</dt>
<dd>
<p>"파일 A가 어디에 존재한다"라는 최종적인 상태가 정의돼 있으며, 먼저 파일이 설치 상태를 확인한 다음 처리가 실행된다. 이미 같은 파일이 있으면 정의된 상태를 만족하므로 변경에 따른 처리를 실행하지 않는다. 설치돼 있지 않거나 다른 내용의 파일이 있는 경우에 대해서만 파일을 복사한다.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>여기서 말하는 멱등성이란 작업 대상의 상태가 항상 같게 되는 것을 가리키는 것은 아니다. 예를 들어 "패키지를 최신 버전으로 유지"라고 정의한 경우에는 그 패키지의 최신 버전이 외부 요인에 의해 달라져, 실제 결과가 달라질 수 있다. 어디까지나 플레이북에 작성된 목적에 기분을 둘 때 결과가 일정하게 되는 점에 주의해야 한다.</p>
</div>
</div>
<div class="sect3">
<h4 id="_reusability">Reusability</h4>
<div class="paragraph">
<p>재사용성. "높은 재사용성" 즉, 범용성을 유지할 수 있으면 앤서블을 계속 사용함에 따라 구현 등에 따른 시간이 줄어들 것이다. 모듈 이외에도 플레이북 측에서도 재사용을 위한 구조로 <a href="https://docs.ansible.com/ansible/latest/user_guide/playbooks_reuse_roles.html">Role</a>이 있다.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_앤서블_설정_파일">앤서블 설정 파일</h3>
<div class="ulist">
<ul>
<li>
<p>INI 형식의 설정 파일<br>
(위에 있을 수록 우선순위 높음)</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><code>ANSIBLE_CONFIG</code> 환경 변수에 지정한 파일</p>
</li>
<li>
<p>현재 디렉토리에 있는 <em>ansible.cfg</em> 파일</p>
</li>
<li>
<p>사용자 홈 디렉토리에 <em>.ansible.cfg</em> 파일</p>
</li>
<li>
<p><em>/etc/ansible/ansible.cfg</em> 파일(글로벌한 기본 설정)</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_playbook">Playbook</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="title">예) 플레이북 디렉토리 구조</div>
<div class="content">
<pre class="highlight"><code>./
├── hosts
└── site.yml</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>YAML 형식으로 쓰인 시스템 정의서 같은 것</p>
</li>
<li>
<p><em>name</em>, <em>hosts</em> 와 같은 것을 directive 혹은 attribute 라고 함</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">site.yml</div>
<div class="content">
<pre class="highlight"><code class="language-yml" data-lang="yml">--- // <b class="conum">(1)</b>
- name: 플레이북 튜토리얼 // <b class="conum">(2)</b>
  hosts: all // <b class="conum">(2)</b>
  ...</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>YAML 도큐먼트임을 선언하는 것</p>
</li>
<li>
<p>로그에 표시되는 이름</p>
</li>
<li>
<p>베포 대상 호스트 지정. all은 인벤토리로 정의된 모든 호스트를 대상으로 함</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="title">site.yml</div>
<div class="paragraph">
<p><em>site.yml</em> 이란 이름은 플레이북의 파일 이름을 관례로 사용한 것. 여러 개의 파일로 구성하는 경우 "거점"이 되는 파일이라는 정도의 의미가 아닐까 생각.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_playbook_실행">Playbook 실행</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ ansible-playbook -i hosts site.yml
PLAY [플레이북 튜토리얼] ********************

TASK [setup] *************************** // <b class="conum">(1)</b>
ok: [machine]

...</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>task에 따로 지정하지 않아도 setup 태스트가 실행한 로그</p>
</li>
</ol>
</div>
<div style="page-break-after: always;"></div>
<div class="ulist">
<ul>
<li>
<p>플레이북을 실행할 때 처음에 자동으로 setup 모듈이 실행됨</p>
</li>
<li>
<p>각 호스트 정보를 수집. 수집된 정보를 Facts 라고 함</p>
</li>
<li>
<p><code>ansible all -i hosts -m setup</code> 으로 확인 가능</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_자주_사용하는_모듈">자주 사용하는 모듈</h4>
<div class="ulist">
<ul>
<li>
<p>file - 파일과 디렉터리의 상태 작업</p>
</li>
<li>
<p>copy - 파일을 작업 대상에게 전송</p>
</li>
<li>
<p>lineinfile - 기존 파일을 행 단위로 수정</p>
</li>
<li>
<p>command - 임의의 명령 실행</p>
</li>
<li>
<p>raw -  파이썬을 거치지 않는 명령을 저레벨로 실행</p>
<div class="ulist">
<ul>
<li>
<p>SSH를 통해서 명령어 실행</p>
</li>
<li>
<p>가능하면 사용하지 않는 것이 좋음</p>
<div class="ulist">
<ul>
<li>
<p>앤서블에 대응하는 파이썬을 설치하기 위해 사용</p>
</li>
<li>
<p>네트워크 기기 등, 파이썬이 내장되지 않은 환경을 조작하기 위해 사용</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_inventory">Inventory</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><strong>정적 인벤토리 파일</strong> 또는 <strong>동적 인벤토리 스크립트</strong> 로 정의</p>
<div class="ulist">
<ul>
<li>
<p>인벤토리 파일</p>
<div class="ulist">
<ul>
<li>
<p>INI 형식의 파일에 호스트 정보를 간단하게 기술</p>
</li>
<li>
<p>작업 대상 호스트의 접속 정보를 미리 알고 있는 것을 전제로 함</p>
</li>
</ul>
</div>
</li>
<li>
<p>동적 인벤토리 스크립트</p>
<div class="ulist">
<ul>
<li>
<p>호스트 정보를 JSON 형식의 표준 출력으로 표시할 스크립트</p>
</li>
<li>
<p>앤서블 명령으로 실행할 때 실시간으로 스크립트가 실행</p>
</li>
<li>
<p>스크립트 외부 시스템에 접근할 때, 동적으로 호스트 정보를 가져올 수 있음</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_정적_인벤토리_파일_작성_방법">정적 인벤토리 파일 작성 방법</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ini" data-lang="ini">[app] <b class="conum">(1)</b>
app1 ansible_host=some.app.host
app2 ansible_host=another.app.host

[db]
db1 ansible_host=db.1.host
db2 ansible_host=db.2.host

[app:vars] <b class="conum">(2)</b>
admin_username=app_user
admin_uid=1001
admin_has_data=False <b class="conum">(3)</b>

[db:vars]
admin_username=app_user
admin_uid=1002
admin_has_data=True

[korea] <b class="conum">(4)</b>
app1

[usa] <b class="conum">(4)</b>
app2</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p><code>[..]</code> 으로 구분된 부분을 섹션이라 함(INI 형식에서 제목 역할)<br>
앤서블에서는 <code>[&lt;그룹 이름&gt;]</code> 형식으로 섹션을 지정해 호스트를 특정 그룹에 할당</p>
</li>
<li>
<p><code>[&lt;그룹 이름&gt;:vars]</code> 형식으로 그룹 변수 전용 섹션 사용 가능</p>
</li>
<li>
<p>부울값은 True 혹은 False 와 같이 대문자로 시작해야 함</p>
</li>
<li>
<p>호스트를 여러 그룹에 할당 가능</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_인벤토리_변수를_yaml_파일에_정의">인벤토리 변수를 YAML 파일에 정의</h4>
<div class="ulist">
<ul>
<li>
<p>인벤토리 변수는 전용 YAML 파일에 정의 가능</p>
</li>
<li>
<p>앤서블에서 정한 변수를 정의하는 파일 규칙</p>
<div class="ulist">
<ul>
<li>
<p>호스트 변수를 정의하는 파일은 <code>host_vars/&lt;호스트 이름&gt;.yml</code></p>
</li>
<li>
<p>그룹 변수를 정의하는 파일은 <code>group_vars/&lt;그룹 이름&gt;.yml</code></p>
</li>
<li>
<p><code>host_vars</code> 디렉토리, <code>group_vars</code> 디렉토리는 인벤토리 파일 또는 플레이북 파일과 같은 디렉토리에 있어야 함</p>
</li>
</ul>
</div>
</li>
<li>
<p>인벤토리 변수 우선순위<br>
(우선순위 높음 &#8594; 낮음)</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>플레이북에 있는 변수를 정의한 YAML 파일</p>
</li>
<li>
<p>인벤토리에 있는 변수를 정의한 YAML 파일</p>
</li>
<li>
<p>인벤토리 파일에서 정의한 변수</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">예) 앤서블에서 정한 변수를 정의하는 파일 규칙</div>
<div class="content">
<pre class="highlight"><code>./
├── hosts
├── group_vars
│   ├── app.yml
│   └── db.yml
└── host_vars
    ├── app1.yml
    └── app2.yml</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">group_vars/app.yml</div>
<div class="content">
<pre class="highlight"><code class="language-yml" data-lang="yml">---
admin_username: app_user
admin_uid: 1001
admin_has_data: False
# admin_has_data: FALSE <b class="conum">(1)</b>
# admin_has_data: false
# admin_has_data: no</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>yml에서는 여러가지 타입으로 사용 가능</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">group_vars/db.yml</div>
<div class="content">
<pre class="highlight"><code class="language-yml" data-lang="yml">---
admin_username: app_user
admin_uid: 1002
admin_has_data: True
# admin_has_data: TRUE
# admin_has_data: true
# admin_has_data: yes</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">host_vars/app1.yml</div>
<div class="content">
<pre class="highlight"><code class="language-yml" data-lang="yml">---
ansible_host: some.app.host</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_기본값을_정의하는_그룹_변수_파일">기본값을 정의하는 그룹 변수 파일</h4>
<div class="ulist">
<ul>
<li>
<p>all이라는 이름은 "인텐토리 내의 모든 호스트가 할당된 특별한 그룹 이름"</p>
</li>
<li>
<p>기본값을 설정할 때 용이</p>
</li>
<li>
<p><code>group_vars/all.yml</code> 과 같이 사용 가능</p>
</li>
<li>
<p>우선순위가 가장 낮게 설정<br>
<strong>all 그룹 변수 &lt; 다른 그룹 변수 &lt; 호스트 변수</strong></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_variable">Variable</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>환경에 따라 값을 다르게 사용하는 데 사용</p>
<div class="ulist">
<ul>
<li>
<p>사람이 정한 <strong>"보통 변수"</strong> 와 호스트가 상태에 따라 자동으로 값을 설정하는 <strong>"Facts"</strong> 로 구분</p>
</li>
<li>
<p>코드를 변경하지 않고 다양한 환경에서 플레이북 사용 가능</p>
<div class="paragraph">
<p><strong>→ 플레이북의 범용성 향상</strong></p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>반복해서 나오는 값의 정의를 정리하는 데 사용</p>
<div class="ulist">
<ul>
<li>
<p>파일 경로가 반복해서 나오는 경우 등에 유용</p>
</li>
<li>
<p>입력할 때 실수하는 것을 방지하고 값을 바꿀 때도 한 곳만 변경</p>
<div class="paragraph">
<p><strong>→ 플레이북의 유지 보수성 향상</strong></p>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_변수_이름을_작성하는_규칙">변수 이름을 작성하는 규칙</h3>
<div class="ulist">
<ul>
<li>
<p>알파벳 대소문자, 숫자, 언더바 사용 가능</p>
</li>
<li>
<p>숫자로 시작 불가</p>
</li>
<li>
<p>변수 이름에 하이픈, 공백, 한글 사용 불가</p>
</li>
<li>
<p>변수 이름은 앤서블에서 파이썬의 속성으로 처리되므로 파이썬 예약어(and, form, to)와 같은 것 사용 불가</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_변수를_정의하는_방법">변수를 정의하는 방법</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">변수를 정의하는 레이어를 크게 4개로 구분</dt>
<dd>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>모듈이 자동으로 정의(Facts)</p>
</li>
<li>
<p>인벤토리(그룹/호스트) 레벨에서 정의</p>
</li>
<li>
<p>앤서블이 실행될 때 정의</p>
</li>
<li>
<p>플레이북에서 정의</p>
</li>
</ol>
</div>
</dd>
</dl>
</div>
<div class="sect3">
<h4 id="_앤서블이_실행할_때_변수를_정의하는_옵션">앤서블이 실행할 때 변수를 정의하는 옵션</h4>
<div class="ulist">
<ul>
<li>
<p><code>--extra-vars</code>(<code>-e</code>) 옵션 사</p>
</li>
<li>
<p>띄어쓰기로 구별하는 key=value 형식</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ ansible-playbook -i hosts -e 'nginx_version=1.10.2 nginx_user=nginx' site.yml # <b class="conum">(1)</b>
$ ansible-playbook -i hosts -e '{"nginx_post": 8080}' site.yml # <b class="conum">(2)</b>
$ ansible-playbook -i hosts -e '@extra-vars.yml' site.yml # <b class="conum">(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p><code>--extra-vars</code>(<code>-e</code>) 옵션 사용하며, 띄어쓰기로 구별하는 key=value 형식</p>
</li>
<li>
<p>(1) 방식으로 사용하면 모두 string으로 다뤄야하므로, 숫자나 불리언 값 등을 다루려면 JSON 형식으로 정의</p>
</li>
<li>
<p>@을 붙히면 YAML 형식으로 변수를 정의한 파일 읽기 가능</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_플레이북에서_변수를_정의">플레이북에서 변수를 정의</h4>
<div class="ulist">
<ul>
<li>
<p>vars 지시자로 직접 정의</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yml" data-lang="yml">vars:
  nginx_port: 8080</code></pre>
</div>
</div>
</li>
<li>
<p>외부 파일에서 변수 읽어 들이기</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yml" data-lang="yml">vars_files:
  - some_vars.yml</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_변수의_우선순위">변수의 우선순위</h4>
<div class="paragraph">
<p>우선순위 높음 &#8594; 낮음</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>엑스트라 변수(명령을 실행할 때에 <code>-e</code> 로 전달한 것)</p>
</li>
<li>
<p>태스트 변수(지정한 태스크에서만 유효)</p>
</li>
<li>
<p>블록 변수(태스크를 모아 놓은 블록에서만 유효)</p>
</li>
<li>
<p>롤의 vars에서 변수를 정의한 파일 / include_vars 모듈로 읽은 변수를 정의한 파일</p>
</li>
<li>
<p>플레이의 vars_files 지시자로 읽은 변수를 정의한 파일</p>
</li>
<li>
<p>플레이의 vars_prompt 지시자로 입력한 변수<sup>*</sup></p>
</li>
<li>
<p>플레이에서 vars로 정의한 변수</p>
</li>
<li>
<p>set_fact로 정의한 값</p>
</li>
<li>
<p>register로 정의한 값</p>
</li>
<li>
<p>Host의 Fact정보(setup이 수집한 정보)</p>
</li>
<li>
<p>플레이북 디렉토리에서 host_vars의 호스트 변수를 정의한 파일</p>
</li>
<li>
<p>플레이북 디렉토리에서 group_vars의 그룹 변수를 정의한 파일</p>
</li>
<li>
<p>인벤토리 디렉토리에서 host_vars의 호스트 변수를 정의한 파일</p>
</li>
<li>
<p>인벤토리 디렉토리에서 group_vars의 그룹 변수를 정의한 파일</p>
</li>
<li>
<p>인벤토리 파일(Dynamic 포함)에서 정의한 변수</p>
</li>
<li>
<p>롤의 default에서 디폴트 변수로 정의한 파일</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>* 플레이북을 실행할 때에 프롬프트에서 변수의 설정값을 수동으로 입력하는 vars_prompt 지시자도 있으나,
프롬프트를 주로 사용하게 되면 플레이북을 자동으로 실행할 수 없게 되므로 이 지시자는 제한적으로 사용해야 함</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_jinja2">Jinja2</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>파이썬으로 작성된 템플릿 엔진</p>
</li>
<li>
<p>Flask(웹 어플리케이션 프레임워크)에서 HTML에 동적인 값을 설정할 때 사용되는 엔진</p>
</li>
<li>
<p>앤서블에서 플레이북에 있는 변수 정보를 확장할 때 사용</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">debug-var.yml</div>
<div class="content">
<pre class="highlight"><code class="language-yml" data-lang="yml">---
- name: 변수의 동작을 확인
  hosts: localhost
  vars:
    my_var: kim
  task:
    - name: my_var 값을 디버깅으로 확인
      debug:
        msg: "변수 my_var 값은 {{ my_var }}이다"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ ansible-playbook debug-var.yml
PLAY [변수의 동작을 확인] **********************************************************

TASK [setup] *******************************************************************
ok: [localhost]

TASK [my_var 값을 디버깅으로 확인] **************************************************
ok: [localhost] =&gt; {
  "msg": "변수 my_var 값은 kim이다"
}

PLAY RECAP *********************************************************************
localhost                      : ok=2   changed=0   unreachable=0   failed=0</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>변수를 <code>{{</code> 와 <code>}}</code> 로 묶으면 앤서블을 실행할 때 변수가 값으로 변경됨</p>
</li>
<li>
<p>YAML 문법상 제약에서 문자열의 앞, 뒷부분에 변수를 활용할 때에는 double-quote로 묶어야 함</p>
</li>
<li>
<p>계층 구조로 된 데이터도 사용 가능</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yml" data-lang="yml">admin_user:
  name: jun
  uid: 1001</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>사용자 이름은 {{ admin_user.name }}의 UID는 {{ admin_user.uid }}입니다.</code></pre>
</div>
</div>
</li>
<li>
<p><a href="https://docs.ansible.com/ansible/2.4/playbooks_templating.html#templating-jinja2" class="bare">https://docs.ansible.com/ansible/2.4/playbooks_templating.html#templating-jinja2</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_role">Role</h2>
<div class="sectionbody">
<div class="paragraph">
<p>플레이북 내용을 기능 단위로 나누어 공통 부붐으로 관리/재사용하기 위한 구조</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_reference">Reference</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="http://www.yes24.com/Product/goods/55227544">앤서블 철저 입문</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-10-23 08:05:20 UTC
</div>
</div>
</body>
</html>