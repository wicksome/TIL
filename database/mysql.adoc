= MySQL
:toc:

== 타입

== datetime

____
The `DATETIME` type is used for values that contain both date and time parts. MariaDB retrieves and displays `DATETIME` values in 'YYYY-MM-DD HH:MM:SS' format. The supported range is '1000-01-01 00:00:00' to '9999-12-31 23:59:59'.
____

* 예전에 cubrid 였는지 oracle이었는지 찾아봤던 것 같은데.. datetime은 내부적으로 string으로 저장했던것 같음. (https://github.com/wicksome/TIL/issues/5)
* 입력 받은 값 그대로를 저장
* 1000-01-01 00:00:00.000000 ~ 9999-12-31 23:59:59.999999
* `DATETIME(6)` 과 같이 자릿수를 지정할 수 있음

.References
* http://underpop.online.fr/m/mysql/manual/mysql-data-types-datetime.html
* https://mariadb.com/kb/en/datetime/


== timestamp

____
The `TIMESTAMP` data type is used for values that contain both date and time parts. `TIMESTAMP` has a range of '1970-01-01 00:00:01' UTC to '2038-01-19 03:14:07' UTC.
____

* 입력받은 리터럴을 UTC로 변경하여 저장.
* UTC를 기준으로 '1970-01-01 00:00:01' ~ '2038-01-19 03:14:07'.
* https://ko.wikipedia.org/wiki/2000%EB%85%84_%EB%AC%B8%EC%A0%9C[Y2K], https://ko.wikipedia.org/wiki/2038%EB%85%84_%EB%AC%B8%EC%A0%9C[Y2K38]
* 인덱스가 더 빠르게 생성된다?

.References
* https://mariadb.com/kb/en/datetime/

== 함수

=== CURRENT_TIMESTAMP

[quote]
____
CURRENT_TIMESTAMP(): Returns the current date time with your timezone configured.
____

* 현재 DB 타임존 기준으로 생성 
* current_timestamp(6) https://dev.mysql.com/doc/refman/5.7/en/fractional-seconds.html[ref]
* 아래와 같이 설정이 가능해보이는데 mysql 버전에 따라 다른듯...
+
[sql]
----
created_at bigint not null default current_timestamp(6)
----

=== UTC_TIMESTAMP

[quote]
____
UTC_TIMESTAMP(): Returns the current date and time using UTC timezone.
____

* `UTC_TIMESTAMP` 는 mysql 8 이상에 추가된것으로 보임
** https://dba.stackexchange.com/a/279140
** https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_utc-timestamp
* aurora db의 버전2는 mysql 5 버전과 호환. 버전3은 mysql 8과 호환
** https://docs.aws.amazon.com/ko_kr/AmazonRDS/latest/AuroraUserGuide/Aurora.AuroraMySQL.CompareMySQL57.html

=== UNIX_TIMESTAMP

[quote]
____
UNIX_TIMESTAMP(): 현재 유닉스 타임스탬프 반환

UNIX_TIMESTAMP(str): `str` 을 유닉스 타임스탬프로 반환
____

.References
* https://dba.stackexchange.com/questions/62466/mysql-timestamp-timezone-handling
* https://mariadb.com/kb/en/utc_timestamp/
